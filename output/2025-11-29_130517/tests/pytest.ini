[pytest]
# BMS WebAPI 接口测试配置

# 测试目录
testpaths = .

# 测试文件匹配模式
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 日志配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 输出配置
addopts = -v --tb=short -ra

# 标记配置
markers =
    p0: 核心功能测试，必须通过
    p1: 重要功能测试，应该通过
    p2: 边界/异常场景测试，建议通过
    smoke: 冒烟测试
    api01: GET /v1/config-templates 模板分页查询
    api02: PUT /v1/config-templates 编辑模板
    api03: POST /v1/config-templates 添加模板
    api04: DELETE /v1/config-templates/{templateId} 删除模板
    api05: PATCH /v1/config-templates/{templateId}/enable 启用模板
    api06: PATCH /v1/config-templates/{templateId}/disable 禁用模板
    api07: PATCH /v1/config-templates/{templateId}/default 设置默认模板
    api08: GET /v1/config-templates/{templateId}/{optType}/basic 查询模板基本信息
    api09: GET /v1/config-templates/{templateId}/list 查询模板指纹列表
    api10: GET /v1/config-templates/choose 指纹分页列表
    api11: POST /v1/config-templates/isExist 唯一性校验
    api12: PUT /v1/config-templates/selectTemplate/{templateId} 添加全部指纹
    api13: PATCH /v1/config-templates/selectTemplate/{templateId} 添加选中指纹
    api14: PUT /v1/config-templates/temps/{templateId} 删除全部指纹
    api15: PATCH /v1/config-templates/temps/{templateId} 批量删除指纹
    api16: GET /v1/config-template/globalConf 获取全局配置
    api17: POST /v1/config-template/globalConf 保存全局配置
    api18: GET /v1/config-template/task 查询任务模板列表

# 过滤警告
filterwarnings =
    ignore::urllib3.exceptions.InsecureRequestWarning
    ignore::DeprecationWarning
